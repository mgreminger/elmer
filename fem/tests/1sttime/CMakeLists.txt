
INCLUDE(${CMAKE_CURRENT_SOURCE_DIR}/../test_macros.cmake)

INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/fem/src)

ADD_LIBRARY(TimeIntegrate MODULE TimeIntegrate.f90)
ADD_LIBRARY(Source2 MODULE Source.f90)
SET_TARGET_PROPERTIES(TimeIntegrate PROPERTIES PREFIX "")
SET_TARGET_PROPERTIES(Source2 PROPERTIES PREFIX "")
SET_TARGET_PROPERTIES(Source2 PROPERTIES OUTPUT_NAME Source)

ADD_DEPENDENCIES(TimeIntegrate elmersolver ElmerSolver_mpi ElmerGrid)
ADD_DEPENDENCIES(Source2 elmersolver ElmerSolver_mpi ElmerGrid)

CONFIGURE_FILE(ELMERSOLVER_STARTINFO ELMERSOLVER_STARTINFO COPYONLY)
CONFIGURE_FILE(1d.sif 1d.sif COPYONLY)

ADD_ELMER_TEST(TimeIntegrate)

